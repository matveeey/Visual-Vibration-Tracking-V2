\hypertarget{video__undistorter_8cpp_source}{}\doxysection{video\+\_\+undistorter.\+cpp}
\label{video__undistorter_8cpp_source}\index{C:/Users/seeyo/source/repos/Visual-\/Vibration-\/Tracking-\/V2/source/video\_undistorter.cpp@{C:/Users/seeyo/source/repos/Visual-\/Vibration-\/Tracking-\/V2/source/video\_undistorter.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}CamCalib\(\backslash\)video\_undistorter.h"{}}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00003}\mbox{\hyperlink{class_video_undistorter_aa42fc7f2661d48c5bfe2ff4ade623b30}{00003}} \mbox{\hyperlink{class_video_undistorter_aa42fc7f2661d48c5bfe2ff4ade623b30}{VideoUndistorter::VideoUndistorter}}(std::string input\_file\_name, std::string output\_file\_name, std::string txt\_file\_name) :}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00004}00004     input\_file\_name\_\{ input\_file\_name \},}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00005}00005     output\_file\_name\_\{ output\_file\_name \},}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00006}00006     txt\_file\_name\_\{ txt\_file\_name \},}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00007}00007     winname\_\{ \textcolor{stringliteral}{"{}Undistortion"{}} \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00008}00008 \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00009}00009     \mbox{\hyperlink{class_video_undistorter_a0ca2ae8209afff234c56e1cb61eb4240}{input\_cap\_}} = \textcolor{keyword}{new} VideoCapture(input\_file\_name);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00011}00011     \mbox{\hyperlink{class_video_undistorter_a33e09df7fd3e1b728ce4a5fd7e1d5a84}{frame\_width\_}} = \mbox{\hyperlink{class_video_undistorter_a0ca2ae8209afff234c56e1cb61eb4240}{input\_cap\_}}-\/>get(CAP\_PROP\_FRAME\_WIDTH);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00012}00012     \mbox{\hyperlink{class_video_undistorter_a09eb1a83ffec08ce3c34c71c2e953b42}{frame\_height\_}} = \mbox{\hyperlink{class_video_undistorter_a0ca2ae8209afff234c56e1cb61eb4240}{input\_cap\_}}-\/>get(CAP\_PROP\_FRAME\_HEIGHT);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00013}00013     \mbox{\hyperlink{class_video_undistorter_a66a505ba920eabecbf0ddc268b96ec95}{frame\_count\_}} = \mbox{\hyperlink{class_video_undistorter_a0ca2ae8209afff234c56e1cb61eb4240}{input\_cap\_}}-\/>get(CAP\_PROP\_FRAME\_COUNT);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00014}00014     \mbox{\hyperlink{class_video_undistorter_a374b4a4060c1a77bdb736f432082c9ce}{fps\_}} = \mbox{\hyperlink{class_video_undistorter_a0ca2ae8209afff234c56e1cb61eb4240}{input\_cap\_}}-\/>get(CAP\_PROP\_FPS);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00016}00016     \mbox{\hyperlink{class_video_undistorter_aa51dcc2cc2726c97ed156eaa3249665f}{output\_cap\_}} = \textcolor{keyword}{new} VideoWriter}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00017}00017     (}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00018}00018         \mbox{\hyperlink{class_video_undistorter_adb48040817f02d9e15638a06e5491777}{output\_file\_name\_}},}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00019}00019         cv::VideoWriter::fourcc(\textcolor{charliteral}{'m'}, \textcolor{charliteral}{'p'}, \textcolor{charliteral}{'4'}, \textcolor{charliteral}{'v'}), \textcolor{comment}{// codec}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00020}00020         \mbox{\hyperlink{class_video_undistorter_a374b4a4060c1a77bdb736f432082c9ce}{fps\_}},}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00021}00021         Size(\mbox{\hyperlink{class_video_undistorter_a33e09df7fd3e1b728ce4a5fd7e1d5a84}{frame\_width\_}}, \mbox{\hyperlink{class_video_undistorter_a09eb1a83ffec08ce3c34c71c2e953b42}{frame\_height\_}})}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00022}00022     );}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00024}00024     namedWindow(\mbox{\hyperlink{class_video_undistorter_aaec69d8897221bf238ce22b9eefd0d1c}{winname\_}}, WINDOW\_NORMAL);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00025}00025 \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00027}00027 VideoUndistorter::\string~VideoUndistorter()}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00028}00028 \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00029}00029     \mbox{\hyperlink{class_video_undistorter_a0ca2ae8209afff234c56e1cb61eb4240}{input\_cap\_}}-\/>release();}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00030}00030     \mbox{\hyperlink{class_video_undistorter_aa51dcc2cc2726c97ed156eaa3249665f}{output\_cap\_}}-\/>release();}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00031}00031 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00032}00032     \textcolor{keyword}{delete} \mbox{\hyperlink{class_video_undistorter_a0ca2ae8209afff234c56e1cb61eb4240}{input\_cap\_}};}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00033}00033     \textcolor{keyword}{delete} \mbox{\hyperlink{class_video_undistorter_aa51dcc2cc2726c97ed156eaa3249665f}{output\_cap\_}};}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00035}00035     destroyWindow(\mbox{\hyperlink{class_video_undistorter_aaec69d8897221bf238ce22b9eefd0d1c}{winname\_}});}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00036}00036 \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00037}00037 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00038}\mbox{\hyperlink{class_video_undistorter_a05b19bb1af0c5fcfd147c48dd447d44d}{00038}} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_video_undistorter_a05b19bb1af0c5fcfd147c48dd447d44d}{VideoUndistorter::ExecuteVideoUndistortion}}()}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00039}00039 \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00040}00040     \textcolor{comment}{// read distortion parameters from txt file}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00041}00041     \mbox{\hyperlink{class_video_undistorter_ad97e93cf1bb586a53494fb95909a4bc6}{LoadFoundParamsFromFile}}(\mbox{\hyperlink{class_video_undistorter_af84edc3f788032cdb9895f05ab4a984b}{txt\_file\_name\_}});}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00042}00042 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00043}00043     std::cout << \mbox{\hyperlink{class_video_undistorter_a66a505ba920eabecbf0ddc268b96ec95}{frame\_count\_}} << std::endl;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00045}00045     \textcolor{keywordtype}{int} frame\_num = 0;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00046}00046     Mat mapX, mapY;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00047}00047     initUndistortRectifyMap(\mbox{\hyperlink{class_video_undistorter_a78e9df5a43762efac01d4d37d97be8e5}{camera\_matrix\_}}, \mbox{\hyperlink{class_video_undistorter_a9363566d895ea53cf3d7b48c5b6e1964}{distortion\_coefficients\_}}, Matx33f::eye(), \mbox{\hyperlink{class_video_undistorter_a78e9df5a43762efac01d4d37d97be8e5}{camera\_matrix\_}}, Size(\mbox{\hyperlink{class_video_undistorter_a33e09df7fd3e1b728ce4a5fd7e1d5a84}{frame\_width\_}}, \mbox{\hyperlink{class_video_undistorter_a09eb1a83ffec08ce3c34c71c2e953b42}{frame\_height\_}}), CV\_32FC1, mapX, mapY);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00048}00048     \textcolor{comment}{//undistort each frame in loop}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00049}00049     \textcolor{keywordflow}{while} (\mbox{\hyperlink{class_video_undistorter_a0ca2ae8209afff234c56e1cb61eb4240}{input\_cap\_}}-\/>get(CAP\_PROP\_POS\_FRAMES) < \mbox{\hyperlink{class_video_undistorter_a66a505ba920eabecbf0ddc268b96ec95}{frame\_count\_}})}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00050}00050     \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00051}00051         \mbox{\hyperlink{class_video_undistorter_a0ca2ae8209afff234c56e1cb61eb4240}{input\_cap\_}}-\/>read(\mbox{\hyperlink{class_video_undistorter_a5c8ce476d923037934eb6299a503593e}{current\_frame\_}});}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00052}00052         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_video_undistorter_a5c8ce476d923037934eb6299a503593e}{current\_frame\_}}.empty())}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00053}00053         \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00054}00054             std::cout << \textcolor{stringliteral}{"{}Processing frame "{}} << \mbox{\hyperlink{class_video_undistorter_a0ca2ae8209afff234c56e1cb61eb4240}{input\_cap\_}}-\/>get(CAP\_PROP\_POS\_FRAMES) << \textcolor{stringliteral}{"{}/"{}} << \mbox{\hyperlink{class_video_undistorter_a66a505ba920eabecbf0ddc268b96ec95}{frame\_count\_}} << std::endl;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00055}00055             \textcolor{comment}{//imshow(winname\_, current\_frame\_);}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00056}00056             }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00057}00057             \textcolor{comment}{//undistort(current\_frame\_, undistorted\_frame\_, camera\_matrix\_, distortion\_coefficients\_);}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00058}00058             remap(\mbox{\hyperlink{class_video_undistorter_a5c8ce476d923037934eb6299a503593e}{current\_frame\_}}, \mbox{\hyperlink{class_video_undistorter_aea3bd77c199df2c27bf8162c67c54eff}{undistorted\_frame\_}}, mapX, mapY, INTER\_LINEAR);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00059}00059             \mbox{\hyperlink{class_video_undistorter_ac82e158db201e5d3189cc2c2eaa0db46}{SaveFrame}}(\mbox{\hyperlink{class_video_undistorter_aea3bd77c199df2c27bf8162c67c54eff}{undistorted\_frame\_}});}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00060}00060             \mbox{\hyperlink{class_video_undistorter_a015a3e4b982094d3ba737debd9f3590e}{AddTips}}(\mbox{\hyperlink{class_video_undistorter_aea3bd77c199df2c27bf8162c67c54eff}{undistorted\_frame\_}}, \textcolor{stringliteral}{"{}Current frame: "{}} + \mbox{\hyperlink{group___helper_functions_gad8a95244f86df84c8f5d35197fe0196f}{HelperFunctions::ToStringWithPrecision}}(\mbox{\hyperlink{class_video_undistorter_a0ca2ae8209afff234c56e1cb61eb4240}{input\_cap\_}}-\/>get(CAP\_PROP\_POS\_FRAMES), 0) + \textcolor{stringliteral}{"{}/"{}} + \mbox{\hyperlink{group___helper_functions_gad8a95244f86df84c8f5d35197fe0196f}{HelperFunctions::ToStringWithPrecision}}(\mbox{\hyperlink{class_video_undistorter_a66a505ba920eabecbf0ddc268b96ec95}{frame\_count\_}}, 0));}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00061}00061             imshow(\mbox{\hyperlink{class_video_undistorter_aaec69d8897221bf238ce22b9eefd0d1c}{winname\_}}, \mbox{\hyperlink{class_video_undistorter_aea3bd77c199df2c27bf8162c67c54eff}{undistorted\_frame\_}});}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00062}00062 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00063}00063             \textcolor{keywordtype}{int} code = waitKey(20);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00064}00064             \textcolor{keywordflow}{switch} (code)}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00065}00065             \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00066}00066                 \textcolor{comment}{// Пауза}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00067}00067                 \textcolor{comment}{// Клавиши -\/ пробел (ASCII code)}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00068}00068             \textcolor{keywordflow}{case} 32:}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00069}00069             \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00070}00070                 waitKey(0);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00071}00071                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00072}00072             \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00073}00073             \textcolor{keywordflow}{case} \textcolor{charliteral}{'q'}:}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00074}00074             \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00075}00075                 \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00076}00076                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00077}00077             \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00078}00078             \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00079}00079         \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00080}00080     \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00082}00082     std::cout << \textcolor{stringliteral}{"{}Undistortion completed"{}} << std::endl;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00083}00083     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00084}00084 \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00085}00085 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00086}\mbox{\hyperlink{class_video_undistorter_a015a3e4b982094d3ba737debd9f3590e}{00086}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_video_undistorter_a015a3e4b982094d3ba737debd9f3590e}{VideoUndistorter::AddTips}}(Mat\& frame, std::string tip)}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00087}00087 \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00088}00088     \textcolor{keywordtype}{int} font = FONT\_HERSHEY\_PLAIN;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00089}00089     \textcolor{keywordtype}{double} font\_scale = 1.5;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00090}00090     \textcolor{keywordtype}{int} thickness = 2;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00092}00092     putText(}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00093}00093         frame,}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00094}00094         tip,}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00095}00095         Point(frame.cols * 0.05, frame.rows * 0.05),}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00096}00096         font,}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00097}00097         font\_scale,}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00098}00098         Scalar(0, 255, 0),}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00099}00099         thickness}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00100}00100     );}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00101}00101 \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00102}00102 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00103}\mbox{\hyperlink{class_video_undistorter_ac82e158db201e5d3189cc2c2eaa0db46}{00103}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_video_undistorter_ac82e158db201e5d3189cc2c2eaa0db46}{VideoUndistorter::SaveFrame}}(Mat frame)}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00104}00104 \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00105}00105     \mbox{\hyperlink{class_video_undistorter_aa51dcc2cc2726c97ed156eaa3249665f}{output\_cap\_}}-\/>write(frame);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00106}00106 \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00107}00107 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00108}\mbox{\hyperlink{class_video_undistorter_ad97e93cf1bb586a53494fb95909a4bc6}{00108}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_video_undistorter_ad97e93cf1bb586a53494fb95909a4bc6}{VideoUndistorter::LoadFoundParamsFromFile}}(std::string txt\_file\_name)}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00109}00109 \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00110}00110     }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00111}00111     std::vector<double> dist;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00112}00112 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00113}00113     std::ifstream file;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00114}00114     std::string line;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00115}00115     std::vector<std::vector<double>> read\_data;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00116}00116 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00117}00117     file.open(txt\_file\_name);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00118}00118     \textcolor{keywordflow}{if} (file.is\_open())}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00119}00119     \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00120}00120         std::cout << \textcolor{stringliteral}{"{}Param file opened"{}} << std::endl;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00121}00121 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00122}00122         \textcolor{keywordflow}{while} (!file.eof())}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00123}00123         \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00124}00124             file >> line;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00125}00125             std::vector<std::string> delimited\_line = \mbox{\hyperlink{class_video_undistorter_adb5c11e438bef28a04b438ed7cf70c45}{SplitString}}(line, \textcolor{stringliteral}{"{};"{}});}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00126}00126             delimited\_line.erase(delimited\_line.begin());}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00127}00127 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00128}00128             std::vector<double> data;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00129}00129 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00130}00130             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < delimited\_line.size(); i++)}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00131}00131             \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00132}00132                 data.push\_back(std::stod(delimited\_line[i]));}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00133}00133             \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00134}00134             read\_data.push\_back(data);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00135}00135         \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00136}00136 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00137}00137         file.close();}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00138}00138     \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00139}00139 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00140}00140     \mbox{\hyperlink{class_video_undistorter_aa11423c2edf80da39457470b604e995a}{fx\_}} = read\_data[0][0];}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00141}00141     \mbox{\hyperlink{class_video_undistorter_a07c962e8a5b9737cab7c7ceef4f99aff}{fy\_}} = read\_data[1][0];}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00142}00142     \mbox{\hyperlink{class_video_undistorter_a11c3a67cc5f2dc470a5354ffcbbd7816}{px\_}} = read\_data[2][0];}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00143}00143     \mbox{\hyperlink{class_video_undistorter_a9e6d7352f492baaa97a51f161a016056}{py\_}} = read\_data[3][0];}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00144}00144     dist = \{ read\_data[4][0], read\_data[4][1], read\_data[4][2], read\_data[4][3], read\_data[4][4] \};}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00145}00145 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00146}00146     std::vector<double> intrin\_arr = \{ \mbox{\hyperlink{class_video_undistorter_aa11423c2edf80da39457470b604e995a}{fx\_}}, 0, \mbox{\hyperlink{class_video_undistorter_a11c3a67cc5f2dc470a5354ffcbbd7816}{px\_}}, 0, \mbox{\hyperlink{class_video_undistorter_a07c962e8a5b9737cab7c7ceef4f99aff}{fy\_}}, \mbox{\hyperlink{class_video_undistorter_a9e6d7352f492baaa97a51f161a016056}{py\_}}, 0, 0, 1 \};}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00147}00147 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00148}00148     \mbox{\hyperlink{class_video_undistorter_a78e9df5a43762efac01d4d37d97be8e5}{camera\_matrix\_}} = Mat(3, 3, CV\_64F, intrin\_arr.data());}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00149}00149     \mbox{\hyperlink{class_video_undistorter_a9363566d895ea53cf3d7b48c5b6e1964}{distortion\_coefficients\_}} = Mat(1, dist.size(), CV\_64F, dist.data());}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00150}00150 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00151}00151     std::cout << \mbox{\hyperlink{class_video_undistorter_a78e9df5a43762efac01d4d37d97be8e5}{camera\_matrix\_}}.size() << std::endl;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00152}00152     std::cout << \mbox{\hyperlink{class_video_undistorter_a9363566d895ea53cf3d7b48c5b6e1964}{distortion\_coefficients\_}}.size() << std::endl;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00153}00153     std::cout << \mbox{\hyperlink{class_video_undistorter_a78e9df5a43762efac01d4d37d97be8e5}{camera\_matrix\_}} << std::endl;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00154}00154     std::cout << \mbox{\hyperlink{class_video_undistorter_a9363566d895ea53cf3d7b48c5b6e1964}{distortion\_coefficients\_}} << std::endl;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00155}00155 \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00156}00156 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00157}\mbox{\hyperlink{class_video_undistorter_adb5c11e438bef28a04b438ed7cf70c45}{00157}} std::vector<std::string> \mbox{\hyperlink{class_video_undistorter_adb5c11e438bef28a04b438ed7cf70c45}{VideoUndistorter::SplitString}}(std::string input\_string, std::string delimiter)}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00158}00158 \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00159}00159     \textcolor{keywordtype}{int} start\_position = 0;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00160}00160     \textcolor{keywordtype}{int} end\_position;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00161}00161     \textcolor{keywordtype}{int} delimiter\_length = delimiter.length();}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00162}00162 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00163}00163     std::string token;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00164}00164     std::vector<std::string> left;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00165}00165 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00166}00166     \textcolor{keywordflow}{while} ((end\_position = input\_string.find(delimiter, start\_position)) != std::string::npos) \{}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00167}00167         token = input\_string.substr(start\_position, end\_position -\/ start\_position);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00168}00168         start\_position = end\_position + delimiter\_length;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00169}00169         left.push\_back(token);}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00170}00170     \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00171}00171 }
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00172}00172     left.push\_back(input\_string.substr(start\_position));}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00173}00173     \textcolor{keywordflow}{return} left;}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00174}00174 \}}
\DoxyCodeLine{\Hypertarget{video__undistorter_8cpp_source_l00175}00175 }

\end{DoxyCode}
