\hypertarget{frame__handler_8cpp_source}{}\doxysection{frame\+\_\+handler.\+cpp}
\label{frame__handler_8cpp_source}\index{C:/Users/seeyo/source/repos/Visual-\/Vibration-\/Tracking-\/V2/source/frame\_handler.cpp@{C:/Users/seeyo/source/repos/Visual-\/Vibration-\/Tracking-\/V2/source/frame\_handler.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}VVT-\/V2\(\backslash\)frame\_handler.h"{}}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00003}\mbox{\hyperlink{class_frame_handler_a1e87b87f91fc59dfedae6e9d3a650a3d}{00003}} \mbox{\hyperlink{class_frame_handler_a1e87b87f91fc59dfedae6e9d3a650a3d}{FrameHandler::FrameHandler}}(\textcolor{keyword}{const} std::string input\_file\_name, \textcolor{keyword}{const} std::string output\_file\_name, \textcolor{keyword}{const} std::string main\_window\_name) :}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00004}00004     input\_cap\_\{ new VideoCapture(input\_file\_name) \},}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00005}00005     input\_cap\_status\_\{ false \},}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00006}00006     output\_cap\_\{ new VideoWriter(output\_file\_name, VideoWriter::fourcc(\textcolor{stringliteral}{'D'}, \textcolor{stringliteral}{'I'}, \textcolor{stringliteral}{'V'}, \textcolor{stringliteral}{'X'}), input\_cap\_-\/>get(CAP\_PROP\_FPS), Size(input\_cap\_-\/>get(CAP\_PROP\_FRAME\_WIDTH), input\_cap\_-\/>get(CAP\_PROP\_FRAME\_HEIGHT))) \},}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00007}00007     main\_window\_name\_\{ main\_window\_name \},}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00008}00008     current\_time\_of\_frame\_\{ 0 \},}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00009}00009     current\_pos\_of\_frame\_\{ 0 \},}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00010}00010     fullscreen\_\{ false \},}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00011}00011     input\_fps\_\{ input\_cap\_-\/>get(CAP\_PROP\_FPS) \},}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00012}00012     input\_frame\_height\_\{ input\_cap\_-\/>get(CAP\_PROP\_FRAME\_HEIGHT) \},}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00013}00013     input\_frame\_width\_\{ input\_cap\_-\/>get(CAP\_PROP\_FRAME\_WIDTH) \},}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00014}00014     input\_frame\_size\_ratio\_\{ input\_frame\_width\_ / input\_frame\_height\_ \},}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00015}00015     text\_resize\_factor\_\{ 1.0f \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00016}00016 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00017}00017     std::cout << \textcolor{stringliteral}{"{}Input fps is: "{}} << \mbox{\hyperlink{class_frame_handler_a52b12ec33b607d0eb0250c648e819609}{input\_fps\_}} << std::endl;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00018}00018     \textcolor{comment}{// создаём окно}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00019}00019     namedWindow(\mbox{\hyperlink{class_frame_handler_af5a948132ceb761b1c9f1c5c71deee75}{main\_window\_name\_}}, WINDOW\_NORMAL);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00020}00020 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00021}00021     \textcolor{comment}{// Находим коэффициент масштабирования для текста}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00022}00022     \mbox{\hyperlink{class_frame_handler_ae3165c660c17d4b410c1690d13fda93c}{InitTextResizeFactors}}();}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00023}00023     }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00024}00024     \textcolor{comment}{// Инициализируем текст подсказок}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00025}00025     \mbox{\hyperlink{class_frame_handler_a2aa22fb456140327c3848efdea1536b4}{tip\_text\_}}.push\_back(\textcolor{stringliteral}{"{}Default Mode"{}});}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00026}00026     \mbox{\hyperlink{class_frame_handler_a2aa22fb456140327c3848efdea1536b4}{tip\_text\_}}.push\_back(\textcolor{stringliteral}{"{}ROI selecting mode (Press 'R')"{}});}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00027}00027     \mbox{\hyperlink{class_frame_handler_a2aa22fb456140327c3848efdea1536b4}{tip\_text\_}}.push\_back(\textcolor{stringliteral}{"{}Pause (Press 'Space')"{}});}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00028}00028     \mbox{\hyperlink{class_frame_handler_a2aa22fb456140327c3848efdea1536b4}{tip\_text\_}}.push\_back(\textcolor{stringliteral}{"{}Fullscreen (Press 'F')"{}});}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00029}00029 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00031}00031 FrameHandler::\string~FrameHandler()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00032}00032 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00033}00033     destroyWindow(\mbox{\hyperlink{class_frame_handler_af5a948132ceb761b1c9f1c5c71deee75}{main\_window\_name\_}});}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00034}00034     this-\/>\mbox{\hyperlink{class_frame_handler_a56190979d8bfe9b896ca05fa23052136}{input\_cap\_}}-\/>release();}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00035}00035     \textcolor{keyword}{delete} this-\/>\mbox{\hyperlink{class_frame_handler_a56190979d8bfe9b896ca05fa23052136}{input\_cap\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00036}00036     this-\/>\mbox{\hyperlink{class_frame_handler_af77346c9760c6406958ff9bd9034be2c}{output\_cap\_}}-\/>release();}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00037}00037     \textcolor{keyword}{delete} this-\/>\mbox{\hyperlink{class_frame_handler_af77346c9760c6406958ff9bd9034be2c}{output\_cap\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00038}00038 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00039}\mbox{\hyperlink{class_frame_handler_a3837bca5a13d8e1e4969edf0d831baf3}{00039}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_frame_handler_a3837bca5a13d8e1e4969edf0d831baf3}{FrameHandler::ReadNextFrame}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00040}00040 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00041}00041     \mbox{\hyperlink{class_frame_handler_a6644d694da107a0b432d7a4d9d3afd39}{input\_cap\_status\_}} = \mbox{\hyperlink{class_frame_handler_a56190979d8bfe9b896ca05fa23052136}{input\_cap\_}}-\/>read(\mbox{\hyperlink{class_frame_handler_a2047595394b429b3233474c17af56c3d}{current\_frame\_}});}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00042}00042     \mbox{\hyperlink{class_frame_handler_a103fd8c5d4ab70aae5b5e8fe9a8b57fd}{current\_time\_of\_frame\_}} = \mbox{\hyperlink{class_frame_handler_a56190979d8bfe9b896ca05fa23052136}{input\_cap\_}}-\/>get(CAP\_PROP\_POS\_MSEC);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00043}00043     \mbox{\hyperlink{class_frame_handler_ae97cfa371c3ac3ecdde04f19422c986c}{current\_pos\_of\_frame\_}} = \mbox{\hyperlink{class_frame_handler_a56190979d8bfe9b896ca05fa23052136}{input\_cap\_}}-\/>get(CAP\_PROP\_POS\_FRAMES);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00044}00044 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00046}\mbox{\hyperlink{class_frame_handler_a194e20bc41e1d8bb849dc6666f182202}{00046}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_frame_handler_a194e20bc41e1d8bb849dc6666f182202}{FrameHandler::ShowFrame}}(Mat frame, \textcolor{keywordtype}{bool} fullscreen)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00047}00047 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00048}00048     \mbox{\hyperlink{class_frame_handler_a053396cb9e34ffe2b301b29fec72a0cc}{fullscreen\_}} = fullscreen;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00050}00050     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_frame_handler_a053396cb9e34ffe2b301b29fec72a0cc}{fullscreen\_}})}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00051}00051     \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00052}00052         setWindowProperty(\mbox{\hyperlink{class_frame_handler_af5a948132ceb761b1c9f1c5c71deee75}{main\_window\_name\_}}, WND\_PROP\_FULLSCREEN, WINDOW\_FULLSCREEN);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00053}00053     \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00054}00054     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00055}00055     \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00056}00056         setWindowProperty(\mbox{\hyperlink{class_frame_handler_af5a948132ceb761b1c9f1c5c71deee75}{main\_window\_name\_}}, WND\_PROP\_FULLSCREEN, WINDOW\_NORMAL);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00057}00057     \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00058}00058 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00059}00059     imshow(\mbox{\hyperlink{class_frame_handler_af5a948132ceb761b1c9f1c5c71deee75}{main\_window\_name\_}}, frame);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00060}00060 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00061}00061 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00062}\mbox{\hyperlink{class_frame_handler_a43fe77a59e8e5d99f7bb0ad3499591ef}{00062}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_frame_handler_a43fe77a59e8e5d99f7bb0ad3499591ef}{FrameHandler::WriteFrame}}(Mat frame\_to\_be\_written)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00063}00063 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00064}00064     \mbox{\hyperlink{class_frame_handler_af77346c9760c6406958ff9bd9034be2c}{output\_cap\_}}-\/>write(frame\_to\_be\_written);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00065}00065 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00067}\mbox{\hyperlink{class_frame_handler_a94cec95a902939c5e56361737d113933}{00067}} Mat \mbox{\hyperlink{class_frame_handler_a94cec95a902939c5e56361737d113933}{FrameHandler::ConcatenateFramesHorizontally}}(Mat left\_frame, Mat right\_frame)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00068}00068 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00069}00069     Mat dst;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00070}00070     std::vector<Mat> vec\_of\_frames;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00071}00071     vec\_of\_frames.push\_back(left\_frame);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00072}00072     vec\_of\_frames.push\_back(right\_frame);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00073}00073     hconcat(vec\_of\_frames, dst);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00074}00074     \textcolor{keywordflow}{return} dst;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00075}00075 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00076}00076 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00077}\mbox{\hyperlink{class_frame_handler_a93befa779beed3a21639b629993195d8}{00077}} Mat \mbox{\hyperlink{class_frame_handler_a93befa779beed3a21639b629993195d8}{FrameHandler::ConcatenateFramesVertically}}(Mat top\_frame, Mat bottom\_frame)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00078}00078 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00079}00079     Mat dst;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00080}00080     std::vector<Mat> vec\_of\_frames;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00081}00081     vec\_of\_frames.push\_back(top\_frame);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00082}00082     vec\_of\_frames.push\_back(bottom\_frame);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00083}00083     vconcat(vec\_of\_frames, dst);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00084}00084     \textcolor{keywordflow}{return} dst;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00085}00085 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00086}00086 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00087}\mbox{\hyperlink{class_frame_handler_a7c33b8ad150344db93c24d29bbabd853}{00087}} Mat \mbox{\hyperlink{class_frame_handler_a7c33b8ad150344db93c24d29bbabd853}{FrameHandler::PutFrameOverFrame}}(Mat foreground\_frame, Mat background\_frame, Point2i translation\_vector)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00088}00088 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00089}00089     \textcolor{comment}{// Количество каналов переднепланового изображения}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00090}00090     \textcolor{keywordtype}{int} channels\_number = foreground\_frame.channels();}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00091}00091     \textcolor{comment}{// Количества каналов двух изображений должны совпадать}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00092}00092     \textcolor{keywordflow}{if} (channels\_number != background\_frame.channels())}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00093}00093         \textcolor{keywordflow}{return} background\_frame;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00094}00094 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00095}00095     \textcolor{comment}{// Разделяем переднее изображение по каналам}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00096}00096     std::vector<Mat> foreground\_planes(channels\_number);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00097}00097     split(foreground\_frame, foreground\_planes);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00098}00098 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00099}00099     \textcolor{comment}{// Разделяем переднее изображение по каналам}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00100}00100     std::vector<Mat> background\_planes(channels\_number);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00101}00101     split(background\_frame, background\_planes);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00102}00102 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00103}00103     \textcolor{comment}{// Проходимся сначала по рядам переднего изображения (по его высоте)}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00104}00104     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} foreground\_row = 0; foreground\_row < foreground\_frame.rows; foreground\_row++)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00105}00105     \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00106}00106         \textcolor{comment}{// Проходимся по колонкам переднего изображения (по его ширине)}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00107}00107         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} foreground\_col = 0; foreground\_col < foreground\_frame.cols; foreground\_col++)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00108}00108         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00109}00109             \textcolor{comment}{// Инициализируем значения ширины (col) и высоты (row) отображения (трансляции)}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00110}00110             \textcolor{keywordtype}{int} translated\_col = foreground\_col + translation\_vector.x;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00111}00111             \textcolor{keywordtype}{int} translated\_row = foreground\_row + translation\_vector.y;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00112}00112             }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00113}00113             \textcolor{comment}{// Проверка, необходимая, чтобы случайно не обратиться к пикселю, находящемуся за границами фонового (заднего) изображения}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00114}00114             \textcolor{keywordflow}{if} (!((translated\_col) < background\_frame.cols \&\& (translated\_row) < background\_frame.rows))}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00115}00115             \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00116}00116                 \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00117}00117             \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00118}00118 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00119}00119             \textcolor{comment}{// Итераторы для прохода по векторам каналов переднего и заднего изображений}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00120}00120             \textcolor{keyword}{auto} backgnd\_it = background\_planes.begin();}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00121}00121             \textcolor{keyword}{auto} foregnd\_it = foreground\_planes.begin();}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00122}00122             \textcolor{keywordflow}{while} (backgnd\_it != background\_planes.end())}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00123}00123             \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00124}00124                 \textcolor{comment}{// Попиксельно отображаем (транслируем) пиксели переднего изображения на заднее изображение}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00125}00125                 backgnd\_it-\/>at<uchar>(translated\_row, translated\_col) = foregnd\_it-\/>at<uchar>(foreground\_row, foreground\_col);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00126}00126                 backgnd\_it++;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00127}00127                 foregnd\_it++;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00128}00128             \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00129}00129         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00130}00130     \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00131}00131     }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00132}00132     Mat result;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00133}00133     merge(background\_planes, result);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00134}00134     \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00135}00135 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00136}00136 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00137}\mbox{\hyperlink{class_frame_handler_a4bd1108adbbd4c21c4c3233efa8c8d1e}{00137}} Mat \mbox{\hyperlink{class_frame_handler_a4bd1108adbbd4c21c4c3233efa8c8d1e}{FrameHandler::MakeGrayFrame}}(Mat frame\_to\_be\_grayed)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00138}00138 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00139}00139     Mat grayed\_frame;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00140}00140     }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00141}00141     \textcolor{keywordflow}{if} (!frame\_to\_be\_grayed.empty())}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00142}00142     \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00143}00143         \textcolor{comment}{// Конвертируем входной Mat из РГБ(БГР) в грейскейл}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00144}00144         cvtColor(frame\_to\_be\_grayed, grayed\_frame, COLOR\_BGR2GRAY);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00145}00145         GaussianBlur(grayed\_frame, grayed\_frame, Size(3, 3), 0);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00146}00146     \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00147}00147     }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00148}00148     \textcolor{keywordflow}{return} grayed\_frame;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00149}00149 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00150}00150 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00151}\mbox{\hyperlink{class_frame_handler_a18519accbae4e5e7a043e81bd6a9d2c6}{00151}} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_frame_handler_a18519accbae4e5e7a043e81bd6a9d2c6}{FrameHandler::GetInputCapStatus}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00152}00152 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00153}00153     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_frame_handler_a6644d694da107a0b432d7a4d9d3afd39}{input\_cap\_status\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00154}00154 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00155}00155 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00156}\mbox{\hyperlink{class_frame_handler_a26b5695df6161f00af36210e4d3d78ad}{00156}} Mat \mbox{\hyperlink{class_frame_handler_a26b5695df6161f00af36210e4d3d78ad}{FrameHandler::GetCurrentFrame}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00157}00157 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00158}00158     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_frame_handler_a2047595394b429b3233474c17af56c3d}{current\_frame\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00159}00159 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00160}00160 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00161}\mbox{\hyperlink{class_frame_handler_a115a1da50a8bc1b00d703b6f8c44222b}{00161}} String \mbox{\hyperlink{class_frame_handler_a115a1da50a8bc1b00d703b6f8c44222b}{FrameHandler::GetMainWindowName}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00162}00162 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00163}00163     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_frame_handler_af5a948132ceb761b1c9f1c5c71deee75}{main\_window\_name\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00164}00164 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00165}00165 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00166}\mbox{\hyperlink{class_frame_handler_a61109313b6d4a9a21783a9c7b66dea68}{00166}} \textcolor{keywordtype}{double} \mbox{\hyperlink{class_frame_handler_a61109313b6d4a9a21783a9c7b66dea68}{FrameHandler::GetCurrentTimeOfFrame}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00167}00167 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00168}00168     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_frame_handler_a103fd8c5d4ab70aae5b5e8fe9a8b57fd}{current\_time\_of\_frame\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00169}00169 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00170}00170 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00171}\mbox{\hyperlink{class_frame_handler_a79ab90b6a2ce7ea8fef695a11bef514c}{00171}} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_frame_handler_a79ab90b6a2ce7ea8fef695a11bef514c}{FrameHandler::GetCurrentPosOfFrame}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00172}00172 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00173}00173     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_frame_handler_ae97cfa371c3ac3ecdde04f19422c986c}{current\_pos\_of\_frame\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00174}00174 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00175}00175 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00176}\mbox{\hyperlink{class_frame_handler_a0a926273fbb3a3901c9a5a75e3380e16}{00176}} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_frame_handler_a0a926273fbb3a3901c9a5a75e3380e16}{FrameHandler::GetAmountOfFrames}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00177}00177 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00178}00178     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_frame_handler_a56190979d8bfe9b896ca05fa23052136}{input\_cap\_}}-\/>get(CAP\_PROP\_FRAME\_COUNT);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00179}00179 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00180}00180 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00181}\mbox{\hyperlink{class_frame_handler_a7871807bfd918b88272a175aa33ea165}{00181}} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_frame_handler_a7871807bfd918b88272a175aa33ea165}{FrameHandler::GetInputFps}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00182}00182 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00183}00183     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_frame_handler_a52b12ec33b607d0eb0250c648e819609}{input\_fps\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00184}00184 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00185}00185 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00186}\mbox{\hyperlink{class_frame_handler_a128638bf1c2d42a6ef84bdd67d6bf442}{00186}} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_frame_handler_a128638bf1c2d42a6ef84bdd67d6bf442}{FrameHandler::GetFrameWidth}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00187}00187 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00188}00188     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_frame_handler_acc1333f07f5bb10f34c2d37459e79b9e}{input\_frame\_width\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00189}00189 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00190}00190 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00191}\mbox{\hyperlink{class_frame_handler_abd588ce2d914edf1d719f86cca3912c5}{00191}} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_frame_handler_abd588ce2d914edf1d719f86cca3912c5}{FrameHandler::GetFrameHeight}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00192}00192 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00193}00193     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_frame_handler_a90b32b3317313f0affe872c2d9ab63f6}{input\_frame\_height\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00194}00194 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00195}00195 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00196}\mbox{\hyperlink{class_frame_handler_ae37c57501fea114483f4ea51da37d08a}{00196}} \textcolor{keywordtype}{float} \mbox{\hyperlink{class_frame_handler_ae37c57501fea114483f4ea51da37d08a}{FrameHandler::GetTextResizeFactor}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00197}00197 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00198}00198     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00199}00199 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00200}00200 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00201}\mbox{\hyperlink{class_frame_handler_a13af7fdd06b373db04ece2adc6e62d14}{00201}} Mat \mbox{\hyperlink{class_frame_handler_a13af7fdd06b373db04ece2adc6e62d14}{FrameHandler::AddTips}}(Mat frame, \textcolor{keywordtype}{int} mode)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00202}00202 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00203}00203     \textcolor{comment}{// Параметры шрифта}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00204}00204     \textcolor{keywordtype}{int} font = FONT\_HERSHEY\_PLAIN;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00205}00205     \textcolor{keywordtype}{double} font\_scale = 1.5 * \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00206}00206     \textcolor{keywordtype}{int} thickness = 2;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00207}00207     \textcolor{keywordtype}{int} baseline = 0;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00208}00208     \textcolor{keywordtype}{int} line\_spacing = 5;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00209}00209     \textcolor{keywordtype}{int} border\_offset = 15;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00210}00210     Scalar default\_tip\_color(150, 150, 150);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00211}00211     Scalar mode\_color(100, 255, 100);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00212}00212     \textcolor{comment}{// Выводим тексты подсказок для режимов}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00213}00213     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{class_frame_handler_a2aa22fb456140327c3848efdea1536b4}{tip\_text\_}}.size() -\/ 1; i++)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00214}00214     \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00215}00215         Scalar font\_color = default\_tip\_color;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00216}00216         \textcolor{keywordflow}{if} (i == mode)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00217}00217         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00218}00218             font\_color = mode\_color;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00219}00219             \textcolor{comment}{// Замена кнопки для переключения режимов подсвечивания точек. Пока так)}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00220}00220         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00221}00221         putText(}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00222}00222             frame,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00223}00223             \mbox{\hyperlink{class_frame_handler_a2aa22fb456140327c3848efdea1536b4}{tip\_text\_}}[i],}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00224}00224             Point2i(}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00225}00225                 border\_offset,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00226}00226                 border\_offset * \mbox{\hyperlink{class_frame_handler_afab579c6e630ae2bf9fdc47a2f9177dc}{input\_frame\_size\_ratio\_}} + i * (getTextSize(\mbox{\hyperlink{class_frame_handler_a2aa22fb456140327c3848efdea1536b4}{tip\_text\_}}[i], font, font\_scale, thickness, \&baseline).height + line\_spacing)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00227}00227             ),}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00228}00228             font,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00229}00229             font\_scale,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00230}00230             font\_color,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00231}00231             thickness,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00232}00232             4}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00233}00233         );}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00234}00234     \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00235}00235 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00236}00236     \textcolor{comment}{// Выводим текст подсказки для полноэкранного режима}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00237}00237     Scalar font\_color = default\_tip\_color;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00238}00238 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00239}00239     \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_frame_handler_a053396cb9e34ffe2b301b29fec72a0cc}{fullscreen\_}})}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00240}00240         font\_color = Scalar(255, 100, 100);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00241}00241     putText(}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00242}00242         frame,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00243}00243         \mbox{\hyperlink{class_frame_handler_a2aa22fb456140327c3848efdea1536b4}{tip\_text\_}}.back(),}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00244}00244         Point2i(}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00245}00245             (\mbox{\hyperlink{class_frame_handler_acc1333f07f5bb10f34c2d37459e79b9e}{input\_frame\_width\_}} -\/ border\_offset -\/ (getTextSize(\mbox{\hyperlink{class_frame_handler_a2aa22fb456140327c3848efdea1536b4}{tip\_text\_}}.back(), font, font\_scale, thickness, \&baseline).width)),}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00246}00246             border\_offset * \mbox{\hyperlink{class_frame_handler_afab579c6e630ae2bf9fdc47a2f9177dc}{input\_frame\_size\_ratio\_}}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00247}00247         ),}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00248}00248         font,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00249}00249         font\_scale,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00250}00250         font\_color,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00251}00251         thickness,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00252}00252         4}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00253}00253     );}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00254}00254 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00255}00255     \textcolor{keywordflow}{return} frame;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00256}00256 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00257}00257 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00258}\mbox{\hyperlink{class_frame_handler_ac586501514225a9e054845c69fe9ccc7}{00258}} Mat \mbox{\hyperlink{class_frame_handler_ac586501514225a9e054845c69fe9ccc7}{FrameHandler::GenerateGradScale}}(\textcolor{keywordtype}{int} left\_limit, \textcolor{keywordtype}{int} right\_limit, \textcolor{keywordtype}{int} colored\_point\_mode)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00259}00259 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00260}00260     \textcolor{comment}{// Параметры шрифта}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00261}00261     \textcolor{keywordtype}{int} font = FONT\_HERSHEY\_PLAIN;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00262}00262     \textcolor{keywordtype}{double} font\_scale = 1 * \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00263}00263     \textcolor{keywordtype}{int} thickness = 1;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00264}00264     \textcolor{keywordtype}{int} baseline = 0;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00265}00265     \textcolor{keywordtype}{int} font\_offset = 5;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00266}00266     \textcolor{keywordtype}{int} font\_height = getTextSize(\textcolor{stringliteral}{"{}tmp"{}}, font, font\_scale, thickness, \&baseline).height;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00267}00267     \textcolor{comment}{// Параметры окна шкалы}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00268}00268     \textcolor{keywordtype}{int} mat\_width = \mbox{\hyperlink{class_frame_handler_acc1333f07f5bb10f34c2d37459e79b9e}{input\_frame\_width\_}};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00269}00269     \textcolor{keywordtype}{int} scale\_height = 10;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00270}00270     \textcolor{keywordtype}{int} mat\_height = scale\_height + font\_height + font\_offset;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00271}00271     \textcolor{keywordtype}{int} scale\_left\_offset = \mbox{\hyperlink{class_frame_handler_acc1333f07f5bb10f34c2d37459e79b9e}{input\_frame\_width\_}} * 0.1;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00272}00272     \textcolor{keywordtype}{int} scale\_width = \mbox{\hyperlink{class_frame_handler_acc1333f07f5bb10f34c2d37459e79b9e}{input\_frame\_width\_}} -\/ scale\_left\_offset;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00273}00273 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00274}00274     Mat frame = Mat(Size(mat\_width, mat\_height), \mbox{\hyperlink{class_frame_handler_a2047595394b429b3233474c17af56c3d}{current\_frame\_}}.type(), Scalar(0, 0, 0));}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00275}00275     \textcolor{keywordtype}{float} interval = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(scale\_width) / \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(right\_limit -\/ left\_limit + 1);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00276}00276     \textcolor{comment}{// Флаг текущей итерации}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00277}00277     \textcolor{keywordtype}{int} iteration = 0;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00278}00278 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00279}00279     \textcolor{comment}{// Отрисовываем цветные прямоугольнички}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00280}00280     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = left\_limit; x <= right\_limit; x++)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00281}00281     \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00282}00282         Rect scale\_unit = Rect(}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00283}00283             Point2f(interval * iteration + scale\_left\_offset, 0),}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00284}00284             Point2f(interval + interval * iteration + scale\_left\_offset, scale\_height)}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00285}00285         );}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00286}00286         rectangle(}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00287}00287             frame,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00288}00288             scale\_unit,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00289}00289             \mbox{\hyperlink{group___helper_functions_ga79584d71167afeb72ca384eaf87c1419}{HelperFunctions::RatioToRgb}}(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(x) / \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{double}\textcolor{keyword}{>}(right\_limit)),}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00290}00290             FILLED}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00291}00291         );}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00292}00292 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00293}00293         std::string scale\_signature = std::to\_string(x);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00294}00294         Size current\_text\_size = getTextSize(scale\_signature, font, font\_scale, thickness, \&baseline);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00295}00295 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00296}00296         putText(}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00297}00297             frame,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00298}00298             scale\_signature,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00299}00299             Point2f(}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00300}00300                 scale\_unit.tl().x + (interval) / 2 -\/ current\_text\_size.width / 2,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00301}00301                 scale\_unit.br().y + scale\_height + (current\_text\_size.height) / 2}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00302}00302             ),}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00303}00303             font,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00304}00304             font\_scale,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00305}00305             Scalar(255, 255, 255),}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00306}00306             thickness,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00307}00307             4}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00308}00308         );}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00309}00309 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00310}00310         iteration++;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00311}00311     \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00312}00312 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00313}00313     \textcolor{comment}{// TEMPORARY!!!}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00314}00314     \textcolor{comment}{// Отдельно выводим два варианта режима при активном ROI -\/ подсвечивание точек по амплитуде/частоте}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00315}00315     std::string coloring\_points\_mode\_tips[3] = \{ \textcolor{stringliteral}{"{}Default"{}}, \textcolor{stringliteral}{"{}Coloring by Frequency"{}}, \textcolor{stringliteral}{"{}Coloring by Amplitude"{}} \};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00316}00316     Size current\_text\_size = getTextSize(coloring\_points\_mode\_tips[colored\_point\_mode], font, font\_scale, thickness, \&baseline);}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00317}00317 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00318}00318     std::cout << \textcolor{stringliteral}{"{}current mode: "{}} << coloring\_points\_mode\_tips[colored\_point\_mode] << std::endl;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00319}00319 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00320}00320     putText(}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00321}00321         frame,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00322}00322         coloring\_points\_mode\_tips[colored\_point\_mode],}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00323}00323         Point2f(}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00324}00324             scale\_left\_offset / 2 -\/ current\_text\_size.width / 2,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00325}00325             mat\_height / 2 + current\_text\_size.height / 2}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00326}00326         ),}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00327}00327         font,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00328}00328         font\_scale,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00329}00329         Scalar(255, 255, 255),}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00330}00330         thickness,}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00331}00331         4}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00332}00332     );}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00333}00333 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00334}00334     \textcolor{keywordflow}{return} frame;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00335}00335 \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00336}00336 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00337}\mbox{\hyperlink{class_frame_handler_ae3165c660c17d4b410c1690d13fda93c}{00337}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_frame_handler_ae3165c660c17d4b410c1690d13fda93c}{FrameHandler::InitTextResizeFactors}}()}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00338}00338 \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00339}00339     std::cout << \textcolor{stringliteral}{"{}frame width: "{}} << \mbox{\hyperlink{class_frame_handler_acc1333f07f5bb10f34c2d37459e79b9e}{input\_frame\_width\_}} << std::endl;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00340}00340     std::cout << \textcolor{stringliteral}{"{}frame height: "{}} << \mbox{\hyperlink{class_frame_handler_a90b32b3317313f0affe872c2d9ab63f6}{input\_frame\_height\_}} << std::endl;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00341}00341 }
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00342}00342     \textcolor{keywordflow}{if} (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{class_frame_handler_afab579c6e630ae2bf9fdc47a2f9177dc}{input\_frame\_size\_ratio\_}}))}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00343}00343     \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00344}00344         \textcolor{keywordflow}{switch} (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{class_frame_handler_a90b32b3317313f0affe872c2d9ab63f6}{input\_frame\_height\_}}))}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00345}00345         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00346}00346         \textcolor{keywordflow}{case} (480):}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00347}00347         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00348}00348             \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}} = 0.44f;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00349}00349             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00350}00350         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00351}00351         \textcolor{keywordflow}{case} (720):}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00352}00352         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00353}00353             \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}} = 0.67f;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00354}00354             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00355}00355         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00356}00356         \textcolor{keywordflow}{case} (1080):}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00357}00357         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00358}00358             \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}} = 1.0f;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00359}00359             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00360}00360         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00361}00361         \textcolor{keywordflow}{case} (1520):}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00362}00362         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00363}00363             \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}} = 1.40f;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00364}00364             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00365}00365         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00366}00366         \textcolor{keywordflow}{case} (2160):}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00367}00367         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00368}00368             \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}} = 2.0f;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00369}00369             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00370}00370         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00371}00371         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00372}00372     \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00373}00373     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00374}00374     \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00375}00375         \textcolor{keywordflow}{switch} (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{class_frame_handler_acc1333f07f5bb10f34c2d37459e79b9e}{input\_frame\_width\_}}))}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00376}00376         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00377}00377         \textcolor{keywordflow}{case} (480):}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00378}00378         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00379}00379             \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}} = 0.44f;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00380}00380             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00381}00381         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00382}00382         \textcolor{keywordflow}{case} (720):}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00383}00383         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00384}00384             \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}} = 0.67f;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00385}00385             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00386}00386         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00387}00387         \textcolor{keywordflow}{case} (1080):}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00388}00388         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00389}00389             \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}} = 1.0f;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00390}00390             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00391}00391         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00392}00392         \textcolor{keywordflow}{case} (1520):}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00393}00393         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00394}00394             \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}} = 1.4f;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00395}00395             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00396}00396         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00397}00397         \textcolor{keywordflow}{case} (2160):}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00398}00398         \{}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00399}00399             \mbox{\hyperlink{class_frame_handler_a51cbdce3182856d3fa5e4209bfd859b4}{text\_resize\_factor\_}} = 2.0f;}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00400}00400             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00401}00401         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00402}00402         \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00403}00403     \}}
\DoxyCodeLine{\Hypertarget{frame__handler_8cpp_source_l00404}00404 \}}

\end{DoxyCode}
